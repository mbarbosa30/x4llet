
Authentication
Read operations (scores, vouch status): No authentication required
Write operations (vouching, revoking): Requires EIP-712 wallet signatures
Rate Limits
200 requests per minute per IP address

CORS
CORS is enabled for all origins. External applications can call the API directly from the browser.

Endpoints
GET /api/v1/score/:address
Get network quality score (0-100) for any wallet address. No authentication required.

Example Request
curl https://acd7837b-e201-4d66-b395-95bd84fb228b-00-g0rbq4l0jrbm.janeway.replit.dev/api/v1/score/0x216844eF94D95279c6d1631875F2dd93FbBdfB61
Response
{
  "address": "0x216844ef94d95279c6d1631875f2dd93fbbdfb61",
  "local_health": 72,
  "cached": true,
  "cached_at": "2025-01-15T12:30:45.123Z",
  "vouch_counts": {
    "incoming_total": 8,
    "incoming_active": 7,
    "outgoing_total": 5,
    "unique_vouchers": 7
  },
  "activity": {
    "last_vouch_given_at": "2025-01-10T08:15:00.000Z"
  }
}
Response Fields
local_health: Signal score 0-100 (higher = more trusted). This is the authoritative trust signal computed by the max-flow algorithm.
vouch_counts.incoming_total: Total vouches ever received (exact count)
vouch_counts.incoming_active: Non-expired/non-revoked vouches (from last 1,000 evaluated)
vouch_counts.outgoing_total: Total vouches ever given (exact count)
vouch_counts.unique_vouchers: Distinct active endorsers (from last 1,000 evaluated)
activity.last_vouch_given_at: When this user last vouched for someone (null if never)
GET /api/v1/vouch/nonce/:address
Get the current epoch and next nonce for creating a vouch signature.

Response
{
  "epoch": 0,
  "nonce": 1
}
POST /api/v1/vouch
Submit a vouch using EIP-712 wallet signature.

Request Body
{
  "endorser": "0x742d35Cc...",
  "endorsee": "0x1234567...",
  "epoch": "0",
  "nonce": "1",
  "sig": "0xabcd...",
  "chainId": 1
}
EIP-712 Message Types
const domain = {
  name: 'MaxFlow',
  version: '1',
  chainId: 1,
};

const types = {
  Endorsement: [
    { name: 'endorser', type: 'address' },
    { name: 'endorsee', type: 'address' },
    { name: 'epoch', type: 'uint64' },
    { name: 'nonce', type: 'uint64' },
  ],
};

const message = {
  endorser: endorserAddress,
  endorsee: endorseeAddress,
  epoch: BigInt(epoch),
  nonce: BigInt(nonce),
};
Success Response
{ "ok": true }
Error Responses
// Invalid nonce (stale - refetch nonce and retry)
{ "error": "Invalid nonce - expected 2, got 1..." }

// Duplicate vouch
{ "error": "Vouch already exists for this endorser->endorsee pair" }

// Invalid signature
{ "error": "Invalid signature - signature must be from endorser wallet" }

// Race condition (409 status)
{ "error": "Nonce already used - please get a new nonce" }
GET /api/v1/vouch-status
Check if a vouch exists and its current status.

Query Parameters
endorser: Endorser wallet address
endorsee: Endorsee wallet address
Response Examples
// Active vouch
{
  "exists": true,
  "status": "active",
  "days_remaining": 67,
  "created_at": "2025-11-15T12:00:00.000Z"
}

// Expiring soon (< 30 days remaining)
{
  "exists": true,
  "status": "expiring_soon",
  "days_remaining": 12,
  "created_at": "2025-09-15T12:00:00.000Z"
}

// Expired
{
  "exists": true,
  "status": "expired",
  "days_remaining": 0,
  "created_at": "2025-06-15T12:00:00.000Z"
}

// Revoked
{
  "exists": true,
  "status": "revoked",
  "days_remaining": null,
  "created_at": "2025-11-15T12:00:00.000Z"
}

// No vouch exists
{
  "exists": false,
  "status": null,
  "days_remaining": null
}
Vouches are valid for 90 days from creation OR as long as the recipient remains active (vouches someone within 90 days).

GET /api/v1/revoke/info
Get endorsement ID needed for revocation.

Query Parameters
endorser: Endorser wallet address
endorsee: Endorsee wallet address
Response
{
  "exists": true,
  "endorsement_id": 1234,
  "already_revoked": false
}
POST /api/v1/revoke
Revoke a vouch using EIP-712 wallet signature.

Request Body
{
  "endorser": "0x742d35Cc...",
  "endorsee": "0x1234567...",
  "endorsementId": 1234,
  "sig": "0xabcd...",
  "chainId": 1
}
EIP-712 Revocation Types
const types = {
  Revocation: [
    { name: 'endorser', type: 'address' },
    { name: 'endorsee', type: 'address' },
    { name: 'endorsementId', type: 'uint256' },
  ],
};

const message = {
  endorser: endorserAddress,
  endorsee: endorseeAddress,
  endorsementId: BigInt(endorsementId),
};
Success Response
{ "ok": true, "revoked": true }
Endpoints Summary
Method	Endpoint	Description
GET	/api/v1/score/:address	Get Signal score
GET	/api/v1/vouch/nonce/:address	Get epoch + nonce
POST	/api/v1/vouch	Submit vouch
GET	/api/v1/vouch-status	Check vouch status
GET	/api/v1/revoke/info	Get endorsement ID
POST	/api/v1/revoke	Revoke vouch
Community API (Server-Side)
For backend services requiring API key authentication.

Authentication
Include your API key in the X-Community-Key header:

curl -H "X-Community-Key: mxf_live_xxxxxxxx" \
  https://acd7837b-e201-4d66-b395-95bd84fb228b-00-g0rbq4l0jrbm.janeway.replit.dev/api/v1/communities/1/metrics.min
Rate Limits
100 requests per minute per API key. Rate limit headers included in responses:

X-RateLimit-Limit: Maximum requests per window
X-RateLimit-Remaining: Requests remaining
X-RateLimit-Reset: Time when limit resets
Community Endpoints
Method	Endpoint	Description
GET	/communities/:id/eligibility.min/:address	Check if user is accepted
GET	/communities/:id/scores.min/:address	Get detailed scores
GET	/communities/:id/metrics.min	Get community metrics
POST	/communities/:id/vouch.min	Submit vouch
Eligibility Response
{
  "accepted": true
}
Scores Response
{
  "accepted": true,
  "score": 72.5,
  "local_health": 68,
  "min_cut": 3,
  "vertex_disjoint": 3,
  "seed_coverage_ok": true,
  "why": "3 independent paths; ≥2 seeds with ≥0.30 each",
  "updated_at": "2025-10-31T00:15:23.456Z"
}
Metrics Response
{
  "accepted_users": 156,
  "min_cut_ge2_share": 0.94,
  "disjoint_ge2_share": 0.94,
  "seeds": [
    {
      "addr": "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb",
      "coverage": 0.30
    }
  ]
}
Best Practices
Caching
Scores are cached server-side and update when vouches change. Client-side caching for 5-10 minutes is safe.

Nonce Handling
If you get "Invalid nonce" or 409 errors, fetch a fresh nonce and retry.

Address Handling
All addresses are normalized to lowercase server-side. Both checksummed and lowercase addresses are accepted.

Epoch/Nonce Types
Both strings and numbers are accepted for epoch and nonce values (e.g., "1" or 1).

Security
Store API keys in environment variables, never in code
Make API calls from your backend, not client-side JavaScript
Use HTTPS for all requests