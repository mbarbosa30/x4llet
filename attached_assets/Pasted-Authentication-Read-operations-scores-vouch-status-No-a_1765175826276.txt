Authentication
Read operations (scores, vouch status): No authentication required

Write operations (vouching, revoking): Requires EIP-712 wallet signatures

Rate Limits
200 requests per minute per IP address

CORS
CORS is enabled for all origins. External applications can call the API directly from the browser.

Simplest Integration: LocalHealth Scores
Getting LocalHealth scores requires zero authentication—just make a GET request to any wallet address. Perfect for quickly integrating Sybil-resistant reputation into your app. Most dApps start here.

Get Signal Score
Get network quality score (0-100) for any wallet address. Pure graph-based signal derived from endorsement network structure. No authentication required.
GET
/api/v1/score/:address
cURL
JavaScript
Python
curl https://acd7837b-e201-4d66-b395-95bd84fb228b-00-g0rbq4l0jrbm.janeway.replit.dev/api/v1/score/0x216844eF94D95279c6d1631875F2dd93FbBdfB61
Response
{
  "address": "0x216844ef94d95279c6d1631875f2dd93fbbdfb61",
  "local_health": 72,
  "cached": true,
  "cached_at": "2025-01-15T12:30:45.123Z",
  
  "vouch_counts": {
    "incoming_total": 8,
    "incoming_active": 7,
    "outgoing_total": 5,
    "unique_vouchers": 7
  },
  
  "activity": {
    "last_vouch_given_at": "2025-01-10T08:15:00.000Z"
  }
}
Response Fields
local_health: Signal score 0-100 (higher = more trusted). This is the authoritative trust signal computed by the max-flow algorithm.
vouch_counts:
• incoming_total: Total vouches ever received (exact count)
• incoming_active: Non-expired/non-revoked vouches (from last 1,000 evaluated)
• outgoing_total: Total vouches ever given (exact count)
• unique_vouchers: Distinct active endorsers (from last 1,000 evaluated)
activity:
• last_vouch_given_at: When this user last vouched for someone (null if never)
Create Vouch
Submit a vouch using EIP-712 wallet signature. Requires getting nonce first.
Step 1: Get Nonce
GET
/api/v1/vouch/nonce/:address
// Response
{
  "epoch": 0,
  "nonce": 1
}
Step 2: Sign and Submit
POST
/api/v1/vouch
{
  "endorser": "0x742d35Cc...",
  "endorsee": "0x1234567...",
  "epoch": "0",
  "nonce": "1",
  "sig": "0xabcd...",
  "chainId": 1
}
Complete Example (viem)
import { createWalletClient, custom } from 'viem';
import { mainnet } from 'viem/chains';

async function createVouch(endorseeAddress) {
  const client = createWalletClient({
    chain: mainnet,
    transport: custom(window.ethereum)
  });
  
  const [endorserAddress] = await client.getAddresses();
  
  // 1. Get current epoch and nonce
  const nonceRes = await fetch(
    'https://acd7837b-e201-4d66-b395-95bd84fb228b-00-g0rbq4l0jrbm.janeway.replit.dev/api/v1/vouch/nonce/' + endorserAddress
  );
  const { epoch, nonce } = await nonceRes.json();
  
  // 2. Sign EIP-712 message
  const domain = {
    name: 'MaxFlow',
    version: '1',
    chainId: 1,
  };
  
  const types = {
    Endorsement: [
      { name: 'endorser', type: 'address' },
      { name: 'endorsee', type: 'address' },
      { name: 'epoch', type: 'uint64' },
      { name: 'nonce', type: 'uint64' },
    ],
  };
  
  const message = {
    endorser: endorserAddress,
    endorsee: endorseeAddress,
    epoch: BigInt(epoch),
    nonce: BigInt(nonce),
  };
  
  const signature = await client.signTypedData({
    domain,
    types,
    primaryType: 'Endorsement',
    message,
  });
  
  // 3. Submit vouch
  const response = await fetch('https://acd7837b-e201-4d66-b395-95bd84fb228b-00-g0rbq4l0jrbm.janeway.replit.dev/api/v1/vouch', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      endorser: endorserAddress,
      endorsee: endorseeAddress,
      epoch: epoch.toString(),
      nonce: nonce.toString(),
      sig: signature,
      chainId: 1,
    }),
  });
  
  return await response.json();
}
Success Response
{ "ok": true }
Error Responses
// Invalid nonce (stale - refetch nonce and retry)
{ "error": "Invalid nonce - expected 2, got 1..." }

// Duplicate vouch
{ "error": "Vouch already exists for this endorser->endorsee pair" }

// Invalid signature
{ "error": "Invalid signature - signature must be from endorser wallet" }

// Race condition (409 status)
{ "error": "Nonce already used - please get a new nonce" }
Check Vouch Status
Check if a vouch exists and its current status (active, expiring soon, expired, or revoked)
GET
/api/v1/vouch-status?endorser=...&endorsee=...
// Active vouch
{
  "exists": true,
  "status": "active",
  "days_remaining": 67,
  "created_at": "2025-11-15T12:00:00.000Z"
}

// Expiring soon (< 30 days remaining)
{
  "exists": true,
  "status": "expiring_soon",
  "days_remaining": 12,
  "created_at": "2025-09-15T12:00:00.000Z"
}

// Expired
{
  "exists": true,
  "status": "expired",
  "days_remaining": 0,
  "created_at": "2025-06-15T12:00:00.000Z"
}

// Revoked
{
  "exists": true,
  "status": "revoked",
  "days_remaining": null,
  "created_at": "2025-11-15T12:00:00.000Z"
}

// No vouch exists
{
  "exists": false,
  "status": null,
  "days_remaining": null
}
Vouches are valid for 90 days from creation OR as long as the recipient remains active (vouches someone within 90 days).

Revoke Vouch
Endorsers can revoke their vouches at any time by signing a revocation message
Step 1: Get Endorsement ID
GET
/api/v1/revoke/info?endorser=...&endorsee=...
// Response
{
  "exists": true,
  "endorsement_id": 1234,
  "already_revoked": false
}
Step 2: Sign and Submit Revocation
POST
/api/v1/revoke
{
  "endorser": "0x742d35Cc...",
  "endorsee": "0x1234567...",
  "endorsementId": 1234,
  "sig": "0xabcd...",
  "chainId": 1
}
EIP-712 Revocation Types
const types = {
  Revocation: [
    { name: 'endorser', type: 'address' },
    { name: 'endorsee', type: 'address' },
    { name: 'endorsementId', type: 'uint256' },
  ],
};

const message = {
  endorser: endorserAddress,
  endorsee: endorseeAddress,
  endorsementId: BigInt(endorsementId),
};
Success Response
{ "ok": true, "revoked": true }
Best Practices
Caching Signal Scores
Scores are cached server-side and update when vouches change. Client-side caching for 5-10 minutes is safe:

const scoreCache = new Map();
const CACHE_TTL = 5 * 60 * 1000; // 5 minutes

async function getCachedMetrics(address) {
  const cached = scoreCache.get(address);
  if (cached && Date.now() - cached.time < CACHE_TTL) {
    return cached.data;
  }
  const res = await fetch('/api/v1/score/' + address);
  const data = await res.json();
  scoreCache.set(address, { data, time: Date.now() });
  return data;
}

// Example: Check if user is trusted
async function isTrusted(address) {
  const metrics = await getCachedMetrics(address);
  // local_health is the authoritative trust signal
  return metrics.local_health >= 50 && 
         metrics.vouch_counts.incoming_active >= 3;
}
Handle Nonce Conflicts
If you get "Invalid nonce" or 409 errors, fetch a fresh nonce and retry:

async function submitVouchWithRetry(endorsee, maxRetries = 2) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await createVouch(endorsee);
    } catch (err) {
      if (err.message.includes('nonce') && i < maxRetries - 1) {
        continue; // Retry with fresh nonce
      }
      throw err;
    }
  }
}
Address Handling
All addresses are normalized to lowercase server-side. Both checksummed and lowercase addresses are accepted.

Epoch/Nonce Types
Both strings and numbers are accepted for epoch and nonce values (e.g., "1" or 1).

EIP-712 Domain
Use the correct domain for all signatures:

const domain = {
  name: 'MaxFlow',
  version: '1',
  chainId: 1, // or your chain ID
};
All Endpoints Summary
GET
/api/v1/score/:address
Get Signal score
GET
/api/v1/vouch/nonce/:address
Get epoch + nonce
POST
/api/v1/vouch
Submit vouch
GET
/api/v1/vouch-status
Check vouch status
GET
/api/v1/revoke/info
Get endorsement ID
POST
/api/v1/revoke
Revoke vouc