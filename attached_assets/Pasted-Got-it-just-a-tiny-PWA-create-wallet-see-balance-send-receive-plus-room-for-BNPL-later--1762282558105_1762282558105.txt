Got it—**just a tiny PWA**: create wallet ➜ see balance ➜ send / receive (plus room for BNPL later). No USSD, no SMS, no passkeys.

# Product skeleton (what ships)

* **PWA footprint:** ≤ ~3–5 MB, offline-first (service worker, asset cache, request queue).
* **Create wallet:** one-screen setup. Default = **local key** (WebCrypto) with optional **encrypted cloud backup** using a single **12-char recovery code** the user writes down. No phone/email required.
* **Home:** stablecoin balance (USDC), recent activity, “Send”, “Receive”.
* **Send:** enter handle/addr or scan QR → confirm → **gasless** send (EIP-3009) via relayer.
* **Receive:** shows your handle + static QR; copy address; generate 1-time “payment link”.
* **Settings (tiny):** export encrypted backup, restore from code, network selector (Base/Celo), language/currency.

---

# How the PWA stays “light” and reliable

* **Local-first state:** keys in **IndexedDB**; balances via a light indexer endpoint that returns only deltas; cache with SW.
* **Low-data UX:** all tokens/avatars local; number-only keypad; no animations; responsive on 2G.
* **No vendor lock-in:** everything works offline except the final relay; queued actions auto-retry when online.

---

# Payments under the hood (simple, safe, gasless)

**Primary rail (USDC EIP-3009)**

1. App builds an **EIP-712** typed-data authorization (from, to, value, validAfter/Before, nonce).
2. User signs locally; app posts the signature to **Relayer**.
3. Relayer calls USDC’s `transferWithAuthorization()`; receiver gets funds; user pays **no gas**. ([GitHub][1])

**Fallback rail (if a chain/token lacks 3009)**

* Use **ERC-2612 permit** → give a single-use allowance to a helper contract that performs the transfer, then zeroes it. ([Ethereum Improvement Proposals][2])

**x402 (optional, but powerful)**

* If a merchant/API replies **HTTP 402 Payment Required**, the app answers with a 3009/permit payment proof; resource unlocks—no accounts. ([docs.cdp.coinbase.com][3])

> **Note:** Prefer **native USDC** that actually supports EIP-3009 on the chosen chain (Base, Celo, etc.). Don’t assume bridged variants do. ([docs.cdp.coinbase.com][4])

---

# Minimal screens (copy-size UI)

1. **Create wallet**

   * Title, 2 bullet safety tips, **“Create”** button.
   * Generates key ➜ shows **12-char recovery code** + “Save as image/print”.
   * Toggle: “Back up to cloud (encrypted)” (optional).

2. **Home**

   * Big balance (USDC) + fiat preview (ARS/… )
   * Buttons: **Send** • **Receive** • (More)
   * Recent 5 tx (icon, counterparty, amount).

3. **Send**

   * To: `@handle` / address / scan QR
   * Amount keypad; **Next** ➜ Confirm (fee = 0, arrives ~instant).
   * Tap **Send** ➜ sign EIP-712 ➜ relayed.

4. **Receive**

   * Your QR + `0x…` + `@handle` + **Copy**.
   * “Create payment link (pre-filled amount)”.

---

# Tech stack (simple + boring)

* **Frontend:** Vite + React + TypeScript, **viem** (or ethers) for typed-data; **idb-keyval** for storage; **qrcode** for QR; **i18next** for languages.
* **Service worker:** Workbox (cache-first UI; network-first for balances; background sync for send-queue).
* **Relayer API (tiny):** Node/Cloudflare Worker—validates EIP-712; calls USDC `transferWithAuthorization`; returns tx hash.
* **Indexer:** small endpoint that returns `[balance, decimals, nonce, recentTxs]` for the user; throttled + ETag’d.

---

# Contracts & endpoints (MVP stubs)

**Relayer**
`POST /relay/transfer-3009`

```json
{
  "chainId": 8453,
  "token": "USDC",
  "typedData": { "...EIP712 domain/types/values..." },
  "signature": "0x..."
}
```

→ `{"txHash":"0x...","status":"submitted"}`

**(Optional) Permit path**
`POST /relay/transfer-permit` with `permit` + `transfer` payload.

**x402 client hook**

* Intercept `HTTP 402` → display pay sheet → pay via `/relay/*` → retry request with payment header. ([docs.cdp.coinbase.com][3])

---

# Security defaults (seedless, still self-custodial)

* **Local key** generated by WebCrypto; **never leaves device** unless user exports encrypted backup.
* **Recovery**: single 12-char code encrypts a backup blob (Argon2id, high iterations) stored locally/by user in cloud/USB/photo.
* **Spending guard:** soft daily limit + “new recipient” cool-off toggle (client-side + relayer policy).
* **No biometrics/passkeys required**, but can be added later without changing accounts.
* **Open-source threat model:** small scope → easy audit.

---

# BNPL (later toggle—kept out of the core UI)

* Separate “BNPL” tab (off by default). Merchant gets USDC now from a vault; user repays weekly; caps & fees enforced on-chain. (You can ship v1 wallet without this and add later.)

---

# EIP-712 typed-data (send USDC with 3009) – example

```ts
// types
const types = {
  TransferWithAuthorization: [
    { name: "from", type: "address" },
    { name: "to", type: "address" },
    { name: "value", type: "uint256" },
    { name: "validAfter", type: "uint256" },   // 0
    { name: "validBefore", type: "uint256" },  // now+10min
    { name: "nonce", type: "bytes32" }
  ]
};
// domain comes from token (name, version, chainId, verifyingContract)
```

The app signs this, posts to the relayer, which submits `transferWithAuthorization()`. ([GitHub][1])

---

# Build plan (fast)

* **Week 1–2:** PWA shell, key generation/backup, Home/Send/Receive, basic indexer.
* **Week 3–4:** 3009 flow + relayer, QR+handles, payment links, offline send-queue.
* **Week 5:** x402 client hook (optional), polish + hardening.

---

If you want, I’ll drop a **starter PWA repo outline** (React + service worker + local key + 3009 relayer stubs) you can clone and run.

[1]: https://github.com/ethereum/EIPs/issues/3010?utm_source=chatgpt.com "EIP-3009: \"Transfer With Authorization\" - ERC20 meta- ..."
[2]: https://eips.ethereum.org/EIPS/eip-2612?utm_source=chatgpt.com "ERC-2612: Permit Extension for EIP-20 Signed Approvals"
[3]: https://docs.cdp.coinbase.com/x402/core-concepts/http-402?utm_source=chatgpt.com "HTTP 402 - Coinbase Developer Documentation"
[4]: https://docs.cdp.coinbase.com/x402/network-support?utm_source=chatgpt.com "Network & Token Support - x402"
